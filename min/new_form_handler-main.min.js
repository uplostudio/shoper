let API_URL_ADDRESS="https://backend.webflow.prod.shoper.cloud",validationPatterns={email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^\d{9}$/,text:/^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ðŚś ,.'-]+$/,nip:/^\d{10}$/,url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,zipcode:/^(\d{5}|\d{2}-\d{3})$/,address:/^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ðŚś ,.'-]+(\s+\d+(\s*[a-zA-Z])?(\s*\/\s*\d+)?)?$/},errorMessages={email:"Podaj poprawny adres e-mail.",phone:"Podaj poprawny numer telefonu składający się z 9 cyfr bez znaków specjalnych.",text:"Podaj poprawne dane.",nip:"Podaj poprawny numer NIP",url:"Podaj poprawny adres URL.",zipcode:"Podaj poprawny kod pocztowy",default:"To pole jest wymagane"},omittedAttributes=new Set(["method","name","id","class","aria-label","fs-formsubmit-element","wf-page-id","wf-element-id","autocomplete","layer"]);function validateInput(e){var t=e.val().trim(),a=e.prop("required"),r=e.prop("disabled"),i=e.hasClass("active"),n=!e.siblings(".new__input-label").length,s=e.data("type")||e.attr("type");if(e.removeClass("invalid error"),i||r)e.siblings('.error-box, [class*="error-wrapper"]').hide();else{if(a&&(""===t||n&&"checkbox"===s&&!e.prop("checked")))return showError(e,errorMessages.default,n,!0),!0;if(""!==t&&validationPatterns[s]&&!validationPatterns[s].test(t))return showError(e,errorMessages[s]||errorMessages.default,n,!1),!0;hideError(e,n)}return!1}function showError(t,a,e,r){if(t.addClass("invalid"),e){e=t.siblings(".form-input__error-wrapper");e.hide(),e.eq(r?1:0).css("display","flex"),("checkbox"===t.attr("type")?t.prev(".form-checkbox-icon"):t).addClass("error")}else{let e=t.siblings(".error-box");(e=0===e.length?$('<span class="error-box"></span>').insertAfter(t):e).text(a).show()}}function hideError(e,t){t?(e.siblings(".form-input__error-wrapper").hide(),("checkbox"===e.attr("type")?e.prev(".form-checkbox-icon"):e).removeClass("error")):e.siblings(".error-box").hide()}function handleBlur(e){var t,e=$(e.target);e.data("touched",!0).removeClass("active"),validateInput(e),e.siblings(".new__input-label").length&&((t=e.siblings(".new__input-label")).removeClass("active"),e.val()?t.addClass("valid"):(t.removeClass("valid"),e.attr("placeholder",e.data("initial-placeholder"))))}function initializeInputs(){$("input, textarea").each(function(){var e=$(this),t=(e.data("touched",!1),!e.siblings(".new__input-label").length);t||(e.data("initial-placeholder",e.attr("placeholder")),e.on({focus:function(){var e=$(this).siblings(".new__input-label");$(this).addClass("active").removeClass("invalid").attr("placeholder",""),e.addClass("active").removeClass("invalid valid"),$(this).siblings(".error-box").hide()},input:function(){var e=$(this).siblings(".new__input-label"),t=0<$(this).val().length;e.toggleClass("active",t),$(this).attr("placeholder",t?"":$(this).data("initial-placeholder")),$(this).hasClass("invalid")&&validateInput($(this))},mouseenter:function(){$(this).siblings(".new__input-label").addClass("hover")},mouseleave:function(){$(this).siblings(".new__input-label").removeClass("hover")}}),t=e.siblings(".new__input-label"),e.val()?(t.addClass("active"),e.attr("placeholder","")):(t.removeClass("active"),e.attr("placeholder",e.data("initial-placeholder")))),e.on("blur",handleBlur)})}function validateForm(e){return $(e).find("input:not([type='submit']):not([data-exclude='true']):not(:disabled), textarea:not([data-exclude='true']):not(:disabled), select:not([data-exclude='true']):not(:disabled)").filter(function(){return!$(this).closest("[data-element]").hasClass("hide")&&validateInput($(this))}).length}function sendFormDataToURL(e){let a=new FormData,r=$(e);Array.from(e.attributes).forEach(({name:e,value:t})=>{e=e.replace("data-","");t&&!omittedAttributes.has(e)&&a.append(e,t)});e=r.find("input:not([type='submit']):enabled:not([data-exclude='true']), textarea:enabled, select:enabled");let i={},n=new Set(["loan_decision_contact","external_ads_terms","simple_form","register_reseller"]);e.each(function(){var e=$(this),t=e.attr("name"),a=e.attr("type"),t=e.attr("data-form")||t;"radio"===a&&e.is(":checked")?i[t]=e.val():"checkbox"===a?n.has(r.attr("data-action"))?i[t]=e.is(":checked")?"1":"0":e.is(":checked")&&(i[t]||(i[t]=[]),i[t].push(e.next().text().replace(/[^\u0000-\u007F\u0100-\u017F]+/g,"").trim())):(a=e.val().trim())&&(i[t]=a)}),Object.entries(i).forEach(([e,t])=>{a.append(e,Array.isArray(t)?t.join(", "):t)}),$.ajax({type:"POST",url:API_URL_ADDRESS,data:a,processData:!1,contentType:!1,beforeSend:()=>{"undefined"!=typeof loader&&loader.show&&loader.show()},complete:()=>{"undefined"!=typeof loader&&loader.hide&&loader.hide()},success:e=>{a.has("host")?1===e.status?(console.log(e),r.siblings(".error-admin").hide()):r.siblings(".error-admin").show():0!==e.status?(r.hide().next().show(),$(document).trigger("submitSuccess",r)):$(document).trigger("submitError",r)},error:()=>{r.siblings(".error-message").show()}})}function handleSubmitClick(e){e.preventDefault();e=$(this).closest("form");0<validateForm(e[0])?sendDataLayer({event:"myTrackEvent",eventCategory:"Button modal form error",eventAction:$(this).val(),eventLabel:window.location.href,eventType:e.attr("data-label")||"consult-form"}):sendFormDataToURL(e[0])}function initializeEventListeners(){$("[data-form='submit']").on("click",handleSubmitClick),$("[data-app^='open_'], [data-element^='open_']").on("click",function(){var e=($(this).data("app")||$(this).data("element")).replace(/^open_|_modal_button$/g,""),e=$(`[data-app='${e}'], [data-element='${e}']`),e=(e.addClass("modal--open"),$(document.body).addClass("overflow-hidden"),e.find("form:first"));0<e.length&&e.find(":input:enabled:visible:first").focus()}),$("[fs-formsubmit-element='reset']").on("click",()=>$(".loading-in-button").hide()),$(document).on("submitSuccess submitError",(e,t)=>{sendDataLayer({event:"myTrackEvent",eventCategory:"Button modal form "+("submitSuccess"===e.type?"sent":"error"),eventAction:$(t).find('[type="submit"]').val(),eventType:$(t).attr("data-label"),eventLabel:window.location.href})})}function cleanObject(e={}){return Object.fromEntries(Object.entries(e).filter(([,e])=>null!=e&&""!==e))}function sendDataLayer(e={}){e=cleanObject(e);window.dataLayer&&dataLayer.push(e)}$(document).ready(()=>{initializeInputs(),initializeEventListeners()});