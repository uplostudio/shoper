$(document).ready(()=>{let i,o=null,n=a=>{var e={email:"Podaj poprawny adres e-mail.",required:"To pole jest wymagane."};return e[a]||e.required},a=a=>{var e=a.val().trim(),t=SharedUtils.EMAIL_REGEX||/^[^\s@]+@[^\s@]+\.[^\s@]+$/;let l=null;return e?t.test(e)||(l=n("email")):l=n("required"),a.next(".error-box").remove(),l?(a.after(`<span class="error-box">${l}</span>`),a.removeClass("valid").addClass("invalid"),a.siblings(".new__input-label").removeClass("valid active").addClass("invalid")):(a.removeClass("invalid").addClass("valid"),a.siblings(".new__input-label").removeClass("invalid").addClass("valid")),l},e=(t,l)=>{t.preventDefault();let n=l.find('[data-type="email"]');if(!a(n)){let e=l.next().next(),a=l.find(".loading-in-button.is-inner");a.show(),i&&i.abort&&i.abort();t={action:l.data("action"),email:n.val(),"adwords[gclid]":window.myGlobals.gclidValue,"adwords[fbclid]":window.myGlobals.fbclidValue,analyticsId:window.myGlobals.analyticsId,affiliant:l.data("affiliant")||"",...DataLayerGatherers.getValueTrackData()};o&&(t.sid=o),(i=$.ajax({url:SharedUtils.API_URL,method:"POST",timeout:3e4,data:t})).then(a=>{SharedUtils.handleResponse(a,l,n,e,!0,1)}).catch(a=>{SharedUtils.handleResponse(a,l,n,e,!1,1)}).always(()=>{a.hide(),i=null})}};let t=$("[data-element='open_trial_wrapper']");t.length&&(console.log("now"),t.on("click",()=>{$trialsWrapper.show(),$("body").addClass("overflow-hidden")}));var l=$("[data-element='close_trial_wrapper']");l.length&&l.on("click",()=>{$trialsWrapper.hide(),$("body").removeClass("overflow-hidden")}),$(document).on("trialStepComplete",function(a,e,t){var l;1===e&&($trialsWrapper.show(),e=$('[data-element="modal_trial_one"]'),l=$('[data-element="modal_trial_two"]'),e.length&&e.hide(),l.length&&l.show(),console.log("Step 1 completed successfully"))}),$(document).on("blur",'[data-action="create_trial_step1"] [data-type="email"]',function(){a($(this))}),$(document).on("keydown",'[data-action="create_trial_step1"] [data-type="email"]',function(a){"Enter"===a.key&&(a.preventDefault(),e(a,$(this).closest("form")))}),$(document).on("click",'[data-action="create_trial_step1"] [data-form="submit-step-one"]',function(a){e(a,$(this).closest("form"))}),$(document).on("submit",'[data-action="create_trial_step1"]',function(a){e(a,$(this))}),SharedUtils.checkAndUpdateSID(),setInterval(SharedUtils.checkAndUpdateSID,36e5),"function"==typeof updateAnalytics?updateAnalytics():console.warn("updateAnalytics function is not defined");let d=()=>{i&&i.abort(),$(document).off("blur",'[data-action="create_trial_step1"] [data-type="email"]'),$(document).off("keydown",'[data-action="create_trial_step1"] [data-type="email"]'),$(document).off("click",'[data-action="create_trial_step1"] [data-form="submit-step-one"]'),$(document).off("submit",'[data-action="create_trial_step1"]'),t.off("click")};$(window).on("beforeunload",d)}),$(document).on("formSubmissionComplete",function(a,e,t,l,n){e?DataLayerGatherers.pushEmailSubmittedData(window.myGlobals.clientId,window.myGlobals.shopId,t.data("action"),l.val()):DataLayerGatherers.pushTrackEventError(t.data("action"),t.find("#label").text(),l.val())});