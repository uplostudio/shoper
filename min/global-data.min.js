window.myGlobals={clientId:null,host:null,shopId:null,analyticsId:null,analyticsId:null,licenseId:null,URL:null,fbclidValue:getOrStoreParameter("fbclid"),gclidValue:getOrStoreParameter("gclid")};let hostname=window.location.hostname;function getOrStoreParameter(t){var a=new URLSearchParams(window.location.search).get(t)||"",e=localStorage.getItem(t);return a?(a!==e&&localStorage.setItem(t,a),a):e||""}function updateAnalytics(){setTimeout(function(){try{var t=ga.getAll()[0];window.myGlobals.analyticsId=t.get("clientId"),$("[name='analytics_id']").val(window.myGlobals.analyticsId)}catch(t){}},2e3)}window.myGlobals.URL="www.shoper.pl"===hostname?"https://www.shoper.pl/ajax.php":"https://webflow-sandbox.shoper.pl/ajax.php";let DataLayerGatherers={formAbandonEvent:function(){let a=$('[data-action="create_trial_step1"], [data-action="create_trial_step2"]'),e=!1;a.find("input").on("input",function(){e=!0}),$(document).on("click",function(t){$(t.target).closest(a).length||e&&!a.data("submitted")&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"formAbandon",formId:a.attr("data-action"),eventHistory:window.history}),e=!1)}),a.on("submit",function(){$(this).data("submitted",!0)})},controlBlur:function(){let t=$('[data-action="create_trial_step1"], [data-action="create_trial_step2"]');t.find("input").on("blur",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"controlBlur",formId:t.attr("data-action"),controlName:$(this).attr("data-form"),controlType:$(this).attr("type"),controlValue:$(this).val()})})},controlFocus:function(){let t=$('[data-action="create_trial_step1"], [data-action="create_trial_step2"]');t.find("input").on("focus",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"controlFocus",formId:t.attr("data-action"),controlName:$(this).attr("data-form"),controlType:$(this).attr("type"),controlValue:$(this).val()})})},pushEmailSubmittedData:function(t,a,e,n){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"trial_EmailSubmitted",client_id:t,"shop-id":a,formId:e,email:n})},pushFormSubmitSuccessData:function(t,a,e){window.dataLayer=window.dataLayer||[];t={eventName:"formSubmitSuccess",formId:t,eventCategory:"Button form sent",eventLabel:window.location.pathname,eventType:a,eventHistory:window.history};e&&(t.formType=e),window.dataLayer.push(t)},pushTrackEventData:function(t,a,e){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"myTrackEvent",formId:t,eventCategory:"Button form sent",eventAction:a,eventType:e,eventLabel:window.location.pathname})},pushTrackEventDataModal:function(t,a,e,n,o){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"formSubmitSuccess",eventCategory:"Button modal form sent",client_id:t,formId:a,"shop-id":e,eventAction:n,eventLabel:window.location.pathname,eventType:o,eventHistory:window.history})},pushTrackEventError:function(t,a,e){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"formSubmitError",formId:t,eventCategory:"Button form error",eventAction:a,eventLabel:window.location.pathname,eventType:e,eventHistory:window.history})},pushSubmitError:function(t,a,e){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"myTrackEvent",formId:t,eventCategory:"Button form error",eventAction:a,eventLabel:window.location.pathname,eventType:e})},pushTrackEventErrorModal:function(t,a,e){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"formSubmitError",formId:t,eventCategory:"Button modal form error",eventAction:a,eventLabel:window.location.pathname,eventType:e,eventHistory:window.history})},pushSubmitErrorModal:function(t,a,e){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"myTrackEvent",formId:t,eventCategory:"Button modal form error",eventAction:a,eventLabel:window.location.pathname,eventType:e})},pushClientTypeChangeEvent:function(t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"client_type_change",client_type:t})},pushFormInteractionEvent:function(t,a,e,n){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_interaction",form_id:t,form_location:a,form_type:e,form_step:n})},checkAndStoreQueryParams:function(){let t=["utm_source","utm_medium","utm_campaign","utm_content","adgroup","utm_term"],a="adwords";var e=function(){let a=new URLSearchParams(window.location.search),e={};return t.forEach(t=>{a.has(t)&&(e[t]=a.get(t))}),e}();0<Object.keys(e).length&&(e={...e=e,timestamp:(new Date).getTime()},localStorage.setItem(a,JSON.stringify(e))),(e=localStorage.getItem(a))&&(e=JSON.parse(e),7776e6<(new Date).getTime()-e.timestamp)&&localStorage.removeItem(a)},getValueTrackData:function(){var t=localStorage.getItem(VALUE_TRACK_KEY);return t?JSON.parse(t):null}};function clientTypeChange(){$('input[name="client_type"]').on("change",function(){var t=$(this).closest("label").find("span.w-form-label").text().trim();DataLayerGatherers.pushClientTypeChangeEvent(t)})}function trackFormInteraction(t,a){t.data("interaction-tracked")||(DataLayerGatherers.pushFormInteractionEvent(t.attr("id")||"empty",window.location.pathname,"on_page",a&&a.length&&a.attr("data-name")||"unknown"),t.data("interaction-tracked",!0))}$(document).ready(function(){DataLayerGatherers.formAbandonEvent(),DataLayerGatherers.controlBlur(),DataLayerGatherers.controlFocus()}),$(document).ready(function(){$("a[data-app^='open_']").click(function(){var t=$(this).data("app"),a=$(this).text(),t=t.split("open_")[1].split("_")[0];window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"myTrackEvent",eventCategory:"Button modal opened",eventAction:a,eventLabel:window.location.href,eventType:t})})}),$(window).on("load",function(){clientTypeChange()}),$(document).ready(function(){$("form").on("focus","input, textarea, select",function(){trackFormInteraction($(this.form),$(this))})});