window.myGlobals={clientId:null,host:null,shopId:null,analyticsId:null,analyticsId:null,licenseId:null,URL:null,fbclidValue:getOrStoreParameter("fbclid"),gclidValue:getOrStoreParameter("gclid")};let hostname=window.location.hostname;function getOrStoreParameter(t){var e=new URLSearchParams(window.location.search).get(t)||"",a=localStorage.getItem(t);return e?(e!==a&&localStorage.setItem(t,e),e):a||""}function updateAnalytics(){setTimeout(function(){try{var t=ga.getAll()[0];window.myGlobals.analyticsId=t.get("clientId"),$("[name='analytics_id']").val(window.myGlobals.analyticsId)}catch(t){}},2e3)}window.myGlobals.URL="www.shoper.pl"===hostname?"https://www.shoper.pl/ajax.php":"https://webflow-sandbox.shoper.pl/ajax.php";let DataLayerGatherers={formAbandonEvent:function(){let e=$(".new__trial-modal"),t=$('[data-element^="modal_trial_"]');var a=$('[data-element="close_trial_wrapper"]');let n=!1,o=null,r=null;function i(){var t;r&&!$(`[data-action="${r}"]`).data("submitted")&&(t=o.val(),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"formAbandon",formId:r,email:t,action:r,website:"shoper",eventLabel:window.location.href}),n=!1,o=null,r=null)}e.on("input change","input, select, textarea",function(){n=!0}),e.on("focus","input, select, textarea",function(){o=$(this),r=t.filter(function(){return"none"!==$(this).css("display")}).find('[data-action^="create_trial_step"]').attr("data-action")}),e.on("blur","input, select, textarea",function(){n=!0}),a.on("click",function(t){n&&i()}),$(document).on("click",function(t){!$(t.target).closest(e).length&&n&&i()}),$(document).on("keydown",function(t){"Escape"===t.key&&n&&i()}),e.on("submit",'[data-action^="create_trial_step"]',function(){n=!1,o=null,r=null})},controlBlur:function(){let t=$("form");t.find("input").on("blur",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"controlBlur",formId:t.attr("data-action"),controlName:$(this).attr("data-form"),controlType:$(this).attr("type"),controlValue:$(this).val()})})},controlFocus:function(){let t=$("form");t.find("input").on("focus",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"controlFocus",formId:t.attr("data-action"),controlName:$(this).attr("data-form"),controlType:$(this).attr("type"),controlValue:$(this).val()})})},pushEmailSubmittedData:function(t,e,a,n){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"trial_EmailSubmitted",client_id:t,"shop-id":e,formId:a,email:n})},pushFormSubmitSuccessData:function(t,e,a){window.dataLayer=window.dataLayer||[];t={eventName:"formSubmitSuccess",formId:t,eventCategory:"Button form sent",eventLabel:window.location.pathname,eventType:e,eventHistory:window.history};a&&(t.formType=a),window.dataLayer.push(t)},pushTrackEventData:function(t,e,a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"myTrackEvent",formId:t,eventCategory:"Button form sent",eventAction:e,eventType:a,eventLabel:window.location.pathname})},pushTrackEventDataModal:function(t,e,a,n,o){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"formSubmitSuccess",eventCategory:"Button modal form sent",client_id:t,formId:e,"shop-id":a,eventAction:n,eventLabel:window.location.pathname,eventType:o,eventHistory:window.history})},pushTrackEventError:function(t,e,a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"formSubmitError",formId:t,eventCategory:"Button form error",eventAction:e,eventLabel:window.location.pathname,eventType:a,eventHistory:window.history})},pushSubmitError:function(t,e,a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"myTrackEvent",formId:t,eventCategory:"Button form error",eventAction:e,eventLabel:window.location.pathname,eventType:a})},pushTrackEventErrorModal:function(t,e,a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"formSubmitError",formId:t,eventCategory:"Button modal form error",eventAction:e,eventLabel:window.location.pathname,eventType:a,eventHistory:window.history})},pushSubmitErrorModal:function(t,e,a){window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventName:"myTrackEvent",formId:t,eventCategory:"Button modal form error",eventAction:e,eventLabel:window.location.pathname,eventType:a})},pushClientTypeChangeEvent:function(t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"client_type_change",client_type:t})},pushFormInteractionEvent:function(t,e,a,n){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"form_interaction",form_id:t,form_location:e,form_type:a,form_step:n})},checkAndStoreQueryParams:function(){let t=["utm_source","utm_medium","utm_campaign","utm_content","adgroup","utm_term"],e="adwords";var a=function(){let e=new URLSearchParams(window.location.search),a={};return t.forEach(t=>{e.has(t)&&(a[t]=e.get(t))}),a}();0<Object.keys(a).length&&(a={...a=a,timestamp:(new Date).getTime()},localStorage.setItem(e,JSON.stringify(a))),(a=localStorage.getItem(e))&&(a=JSON.parse(a),7776e6<(new Date).getTime()-a.timestamp)&&localStorage.removeItem(e)},getValueTrackData:function(){var t=localStorage.getItem(VALUE_TRACK_KEY);return t?JSON.parse(t):null}};function clientTypeChange(){$('input[name="client_type"]').on("change",function(){var t=$(this).closest("label").find("span.w-form-label").text().trim();DataLayerGatherers.pushClientTypeChangeEvent(t)})}function trackFormInteraction(t,e){t.data("interaction-tracked")||(DataLayerGatherers.pushFormInteractionEvent(t.attr("id")||"empty",window.location.pathname,"on_page",e&&e.length&&e.attr("data-name")||"unknown"),t.data("interaction-tracked",!0))}$(document).ready(function(){DataLayerGatherers.formAbandonEvent(),DataLayerGatherers.controlBlur(),DataLayerGatherers.controlFocus()}),$(document).ready(function(){$("a[data-app^='open_'], a[data-element^='open_']").click(function(){var t=$(this).data("app")||$(this).data("element"),e=$(this).text(),t=t.split("open_")[1].split("_")[0];window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"myTrackEvent",eventCategory:"Button modal opened",eventAction:e,eventLabel:window.location.href,eventType:t})})}),$(window).on("load",function(){clientTypeChange()}),$(document).ready(function(){$("form").on("focus","input, textarea, select",function(){trackFormInteraction($(this.form),$(this))})});