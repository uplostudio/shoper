let gclidInput,gclidValue,fbclidInput,fbclidValue,regexp,regexpFb,locationG,locationGFb,match,matchFb,analyticsId,analyticsIdInputValue=document.querySelector("[name='analitycs_id']"),isFromBanner=!1,formLocation="",client_id,loader,splited;try{let e=document.querySelector("[data-ga='true']");e.addEventListener("click",()=>{formLocation="baner-promo"})}catch(e){}regexp=/[?&]gclid=([^&]+)/gm,locationG=window.location.search,null!==(match=locationG.match(regexp))?0<(splited=match[0].split("=")).length?(gclidValue=splited[1],localStorage.setItem("gclid",gclidValue),(gclidInput=document.querySelector("[name='adwords[gclid]']")).setAttribute("value",gclidValue)):void 0===localStorage.gclid&&(gclidValue="",(gclidInput=document.querySelector("[name='adwords[gclid]']")).setAttribute("value",gclidValue)):"undefined"!==localStorage.gclid&&(gclidValue=localStorage.gclid,(gclidInput=document.querySelector("[name='adwords[gclid]']")).setAttribute("value",gclidValue)),void 0===localStorage.gclid&&(gclidValue="",(gclidInput=document.querySelector("[name='adwords[gclid]']")).setAttribute("value",gclidValue)),regexpFb=/[?&]fbclid=([^&]+)/gm,locationGFb=window.location.search,null!==(matchFb=locationGFb.match(regexpFb))?0<(splited=matchFb[0].split("=")).length?(fbclidValue=splited[1],localStorage.setItem("fbclid",fbclidValue),(fbclidInput=document.querySelector("[name='adwords[fbclid]']")).setAttribute("value",fbclidValue)):void 0===localStorage.fbclid&&(fbclidValue="",(fbclidInput=document.querySelector("[name='adwords[fbclid]']")).setAttribute("value",fbclidValue)):"undefined"!==localStorage.fbclid&&(fbclidValue=localStorage.fbclid,(fbclidInput=document.querySelector("[name='adwords[fbclid]']")).setAttribute("value",fbclidValue)),void 0===localStorage.fbclid&&(fbclidValue="",(fbclidInput=document.querySelector("[name='adwords[fbclid]']")).setAttribute("value",fbclidValue));var intervalId=window.setTimeout(function(){try{var e=ga.getAll()[0];return analyticsId=e.get("clientId")}catch(e){}},2e3);let trialStepOneEmailInputs=document.querySelectorAll("[app='create_trial_step1'] [app='email']"),trialOpenButton=(emailInput=document.querySelector("[app='email']"),document.querySelectorAll("[app='open_trial_modal_button']")),trialStepOneModal=document.querySelector("[app='create_trial_step1_modal']"),inputVals,inputValsArr=[],inputValsArrFiltered,elementId,result,createTrialStepOne=(window.addEventListener("beforeunload",()=>{trialStepOneEmailInputs.forEach(e=>{inputVals=e.value;e=document.querySelector("[app='create_trial_step1']");elementId=e.getAttribute("app"),inputValsArr.push(inputVals),inputValsArrFiltered=inputValsArr.filter(e=>1<e.length)}),0<inputValsArrFiltered.length&&window.dataLayer&&(data={event:"formAbandon",formId:elementId,eventHistory:window.history},dataLayer.push(data))}),trialOpenButton.forEach(e=>{e.addEventListener("click",()=>{trialStepOneModal.classList.add("modal--open"),$(document.body).css("overflow","hidden")})}),trialStepOneEmailInputs.forEach(t=>{t.addEventListener("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),this.blur(),this.form.querySelector("[data-app='submit-step-one']").click())}),t.addEventListener("blur",function(){checkEmailBlurTrialStepOne(t);var e=document.querySelector("[app='create_trial_step1']").getAttribute("app");window.dataLayer&&(e={event:"controlBlur",formId:e,controlName:t.getAttribute("app"),controlType:t.type,controlValue:t.value},dataLayer.push(e))}),t.addEventListener("focus",()=>{var e=document.querySelector("[app='create_trial_step1']").getAttribute("app");window.dataLayer&&(e={event:"controlFocus",formId:e,controlName:t.getAttribute("app"),controlType:t.type,controlValue:t.value},dataLayer.push(e))})}),document.querySelectorAll("[data-app='submit-step-one']"));createTrialStepOne.forEach(r=>{r.addEventListener("click",e=>{let o=e.target.form;loader=r.querySelector(".loading-in-button"),result&&(loader.style.display="block",$.ajax({url:"https://www.shoper.pl/ajax.php",headers:{},method:"POST",data:{action:"create_trial_step1",email:emailValue,analytics_id:analyticsId,"adwords[gclid]":gclidInput.value,"adwords[fbclid]":fbclidInput.value},success:function(e){var t=e.client_id,a=(o=r.closest("form")).parentElement.querySelector(".w-form-fail"),l={3:"Próbujesz uruchomić więcej niż jedną wersję testową sklepu w zbyt krótkim czasie. Odczekaj kilka minut, zanim zrobisz to ponownie.",2:"Próbujesz uruchomić więcej niż jedną wersję testową sklepu w zbyt krótkim czasie. Odczekaj co najmniej godzinę, zanim zrobisz to ponownie.",4:"Uruchomiłeś co najmniej cztery wersje testowe sklepu w zbyt krótkim czasie. Odczekaj 24h od ostatniej udanej próby, zanim zrobisz to ponownie."};l[e.code]?(a.children[0].innerHTML=l[e.code],a.style.display="block",loader.style.display="none"):1===e.code||1===e.status?(o=r.closest("form"),trialStepOneModal.classList.remove("modal--open"),document.querySelector("[app='trial-domain']").innerHTML=e.host,document.querySelector("[data-modal='create_trial_step2']").classList.add("modal--open"),loader.style.display="none",$(document.body).css("overflow","hidden"),dataLayer.push({event:"trial_EmailSubmitted",client_id:t,"shop-id":e.shop_id,formId:o.parentElement.getAttribute("app"),email:emailValue}),dataLayer.push({eventName:"formSubmitSuccess",formId:o.parentElement.getAttribute("app"),eventCategory:"Button form sent",eventLabel:window.location.pathname,eventType:emailValue,eventHistory:window.history}),""!==formLocation&&dataLayer.push({formLocation:formLocation}),dataLayer.push({event:"myTrackEvent",formId:o.parentElement.getAttribute("app"),eventCategory:"Button form sent",eventAction:o.querySelector("[data-app='submit-step-one']").textContent,eventType:emailValue,eventLabel:window.location.pathname})):(dataLayer.push({eventName:"formSubmitError",formId:o.parentElement.getAttribute("app"),eventCategory:"Button form error",eventAction:o.querySelector("[data-app='submit-step-one']").textContent,eventLabel:window.location.pathname,eventType:emailValue,eventHistory:window.history}),dataLayer.push({event:"myTrackEvent",formId:o.parentElement.getAttribute("app"),eventCategory:"Button form error",eventAction:o.querySelector("[data-app='submit-step-one']").textContent,eventType:emailValue,eventLabel:window.location.pathname}))}}))})});