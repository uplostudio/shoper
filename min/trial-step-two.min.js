$(document).ready(function(){let n={errors:[],phoneRegex:new RegExp("^\\+48\\d{9}$")};function r(e,t,a){let r=t.closest("form"),i=r.find(".w-form-fail"),o=(t.trigger("blur"),DataLayerGatherers.getValueTrackData()),s=r.find(".loading-in-button.is-inner");var l;0===n.errors.length?$.ajax({type:"POST",url:window.myGlobals.URL,data:(l={action:"create_trial_step2",phone:a.getNumber(),formid:"create_trial_step2",eventname:"formSubmitSuccess","adwords[gclid]":window.myGlobals.gclidValue,"adwords[fbclid]":window.myGlobals.fbclidValue,analytics_id:window.myGlobals.analyticsId},o&&Object.entries(o).forEach(([e,t])=>{"timestamp"!==e&&(l[e]=t)}),l),beforeSend:function(){s.show()},success:function(e){DataLayerGatherers.pushTrackEventDataModal(window.myGlobals.clientId,$("#create_trial_step2").attr("data-action"),window.myGlobals.shopId,$("#create_trial_step2").find("#label").text(),a.getNumber()),DataLayerGatherers.pushTrackEventData(r.find("#create_trial_step2").attr("data-action"),$("#create_trial_step2").find("#label").text(),a.getNumber()),1===e.status&&(e.license_id&&(window.myGlobals.licenseId=e.license_id),window.location.href="www.shoper.pl"===hostname?"https://www.shoper.pl/zaloz-sklep":"https://webflow-sandbox.shoper.pl/zaloz-sklep")},error:function(e){DataLayerGatherers.pushTrackEventErrorModal($("#create_trial_step2").attr("data-action"),$("#create_trial_step2").find("#label").text(),a.getNumber()),DataLayerGatherers.pushSubmitErrorModal($("#create_trial_step2").attr("data-action"),$("#create_trial_step2").find("#label").text(),a.getNumber()),i.show()},complete:function(){s.hide()}}):e.preventDefault()}$("form").on("click",".iti.iti--allow-dropdown.iti--separate-dial-code.iti--show-flags",function(){var e;$(window).width()<992&&(e=$(".iti.iti--container")).length&&!e.parent().is(this)&&(e.css({top:"48px",left:"0",position:"absolute",height:"50vh","overflow-y":"auto"}),$(this).append(e))}),$('[data-action="create_trial_step2"] [data-type="phone"]').each(function(){let t=$(this);var a=window.intlTelInput(t.get(0),{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",preferredCountries:["pl","de","ie","us","gb","nl"],autoInsertDialCode:!1,nationalMode:!1,separateDialCode:!0,autoPlaceholder:"off",initialCountry:"pl"});t.on("blur",function(){n.errors=function(e,t,a,r){t=[];let i=r.getSelectedCountryData().iso2,o=r.getNumber();$(e).removeClass("error"),$("[data-toast]").removeClass("error").css("display","none"),o?"pl"!==i||a.test(o)||($('[data-toast="regex"]').addClass("error").css("display","flex"),t.push("Phone is invalid.")):($('[data-toast="required"]').addClass("error").css("display","flex"),t.push("Phone is required."));return t}(this,n.errors,n.phoneRegex,a)}),t.on("keydown",function(e){13===e.which&&($(this).trigger("blur"),r(e,t,a))}),t.closest("form").find('[data-form="submit_trial_step_two"]').on("click",function(e){r(e,t,a)})})});