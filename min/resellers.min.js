$(document).ready(function(){$("body").css("overflow","hidden");let t=0,a=0,n=!1,r=!1,s=!1;var e;function l(){var e;(s||(e=n?100:70,e=a/Math.max(1,t)*e,e=Math.min(Math.round(e),100),$('[data-item="loader-text"]').text(e+"%"),r&&a>=t&&n))&&$("[data-field='loader-anim']").fadeOut(200,function(){$(this).remove(),$("body").css("overflow","")})}function i(e,t,r){let s=$(e),l=s.children(".filters2_item").first().clone();s.empty(),[...new Set(t)].sort((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})).forEach((e,t)=>{var a=l.clone(),t=r+"-"+t,n=$("<input>").attr("type","checkbox").attr("id",t).addClass("new__form-input is-checkbox"),t=$("<label>").attr("for",t).addClass("new_checkbox-label").text(e);a.empty().append(n,t),s.append(a)})}function h(e,t,a,n,r=!1){0<a.children().filter(function(){return $(this).find('[data-element="tag-text"]').text()===e}).length||((t=t.clone()).removeAttr("data-element"),t.find('[data-element="tag-text"]').text(e),n&&t.data("checkbox",n),r&&t.data("isSearchTag",!0),a.append(t),t.on("click",function(){var e=$(this),t=e.data("isSearchTag");t?$('input[data-name="search"]').val("").trigger("input"):(t=e.data("checkbox"))&&t.prop("checked",!1).trigger("change"),e.remove(),c()}))}function d(){var e=new URLSearchParams(window.location.search);e.has("zakres-uslug")&&e.get("zakres-uslug").split(",").forEach(e=>{$('[data-element="list-zakres"] label').filter(function(){return $(this).text()===e}).prev("input").prop("checked",!0)}),e.has("specjalizacja")&&e.get("specjalizacja").split(",").forEach(e=>{$('[data-element="list-specialization"] label').filter(function(){return $(this).text()===e}).prev("input").prop("checked",!0)}),e.has("status")&&e.get("status").split(",").forEach(e=>{$('[data-element="list-status"] label').filter(function(){return $(this).text()===e}).prev("input").prop("checked",!0)}),e.has("search")&&$('input[data-name="search"]').val(e.get("search"))}setTimeout(()=>{r&&!(a<t)&&n||(console.log("Loading timeout reached - forcing completion"),s=!0,r=!0,a=t,n=!0,l())},3e3);let o;function c(){let i=$('[data-element="list-zakres"] input:checked').map(function(){return $(this).next("label").text()}).get(),d=$('[data-element="list-specialization"] input:checked').map(function(){return $(this).next("label").text()}).get(),o=$('[data-element="list-status"] input:checked').map(function(){return $(this).next("label").text()}).get(),c=$('input[data-name="search"]').val().toLowerCase(),p=0;var n=$('[data-element="reseller-item"]'),e=$('[data-element="empty"]');e.css("display","none"),n.each(function(){var e=$(this);let t=e.find('[data-element="reseller-categories"] .category-item span:last-child').map(function(){return $(this).text()}).get(),a=e.find('[data-element="reseller-badges-wrapper"] img').map(function(){return $(this).attr("alt")}).get();var n=e.find('[data-element="reseller-status"] div').text(),r=e.find('[data-element="reseller-name"]').text().toLowerCase(),s=0===i.length||i.some(e=>t.includes(e)),l=0===d.length||d.some(e=>a.includes(e)),n=0===o.length||o.includes(n),r=""===c||r.includes(c);s&&l&&n&&r?(e.css("display","block"),p++):e.css("display","none")}),0===p&&e.css("display","block");{let a=$('[data-element="tag-template"]');if(0!==a.length){let e=a.parent(),t=(e.children().not(a).remove(),0);$('[data-element="list-zakres"], [data-element="list-specialization"], [data-element="list-status"]').find("input:checked").each(function(){h($(this).next("label").text(),a,e,$(this)),t++});n=$('input[data-name="search"]').val().trim();n&&(h(n,a,e,null,!0),t++),0<t?(e.children().not(a).removeClass("hide"),e.removeClass("hide")):(e.children().addClass("hide"),e.addClass("hide")),a.addClass("hide")}}e=new URLSearchParams,0<(n=$('[data-element="list-zakres"] input:checked').map(function(){return $(this).next("label").text()}).get()).length&&e.set("zakres-uslug",n.join(",")),0<(n=$('[data-element="list-specialization"] input:checked').map(function(){return $(this).next("label").text()}).get()).length&&e.set("specjalizacja",n.join(",")),0<(n=$('[data-element="list-status"] input:checked').map(function(){return $(this).next("label").text()}).get()).length&&e.set("status",n.join(",")),(n=$('input[data-name="search"]').val().trim())&&e.set("search",n),n=window.location.pathname+(e.toString()?"?"+e.toString():"");window.history.pushState({},"",n)}$('[data-element="list-zakres"], [data-element="list-specialization"], [data-element="list-status"]').on("change",'input[type="checkbox"]',function(){c()}),$('input[data-name="search"]').on("input",function(){var e,t;e=c,t=150,clearTimeout(o),o=setTimeout(e,t)}),window.addEventListener("popstate",function(){d(),c()}),$(window).on("load",function(){r=!0,l()}),"complete"===document.readyState&&(r=!0,l()),$("[data-field='loader-anim']").show(),e=$('img[src]:not([loading="lazy"]), script[src], link[rel="stylesheet"]').filter(function(){return!(this.complete||"complete"===this.readyState||"loaded"===this.readyState)}),t=e.length,0===(t+=1)&&(t=1),l(),$('img[src]:not([loading="lazy"]), script[src], link[rel="stylesheet"]').each(function(){var e=this;e.complete||"complete"===e.readyState||"loaded"===e.readyState?(a++,l()):$(e).one("load error",function(){a++,l()})}),new Promise((e,t)=>{$.ajax({url:"https://backend.webflow.prod.shoper.cloud/?action=get_partners",method:"GET",dataType:"json",success:function(r){let o=$('[data-element="resellers-list"]'),c=o.children('[data-element="reseller-item"]').first();new Promise(e=>{if(r&&1===r.status&&Array.isArray(r.partners)){let t=[],a=[],n=[];o.children('[data-element="reseller-item"]').not(":first").remove(),r.partners.forEach((e,r)=>{var s=0===r?c:c.clone();0!==r&&o.append(s);{r=s,s=e,r.attr("data-reseller-id",s.id),r.attr("href","/lista-partnerow?partner="+s.id),r.find('[data-element="reseller-logo"]').attr("src",s.logo||""),r.find('[data-element="reseller-name"]').text(s.name||""),r.find('[data-element="reseller-city"]').text(s.city||"");let n=r.find('[data-element="reseller-categories"]'),t=(n.empty(),(s.categories||[]).forEach(e=>{var t=$("<div>").addClass("category-item").css({display:"flex",alignItems:"center"}),a=$("<span>").html('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.0001 10.7799L3.2201 7.9999L2.27344 8.9399L6.0001 12.6666L14.0001 4.66656L13.0601 3.72656L6.0001 10.7799Z" fill="#03081C"/></svg>').css({marginRight:"8px",flexShrink:0}),e=$("<span>").text(e);t.append(a,e),n.append(t)}),r.find('[data-element="reseller-erps"]'));t.empty(),(s.erps||[]).forEach(e=>{t.append($("<div>").text(e))}),(l=r.find('[data-element="reseller-status"]')).empty(),s.partner_status&&l.append($("<div>").text(s.partner_status));var l=r.find('[data-element="badges-section"]'),i=s.partner_badges&&0<s.partner_badges.length,d=s.partner_status&&0<s.partner_status.length;if(i||d){let e=l,a=(l.length||(e=$("<div>").attr("data-element","badges-section").attr("class","badges-section"),r.append(e)),e.find('[data-element="reseller-badges-wrapper"]'));a.length||(a=$("<div>").attr("data-element","reseller-badges-wrapper"),e.append(a)),a.empty(),d&&(r=`https://dcsaascdn.net/shoperpl/partner/status/${s.partner_status.toLowerCase().replace(/\s+/g,"_")}.png`,d=$("<img>").attr("src",r).attr("alt",s.partner_status).attr("title",s.partner_status).attr("loading","lazy").addClass("reseller_box-badge"),a.append(d)),i&&s.partner_badges.forEach(e=>{var t=`https://dcsaascdn.net/shoperpl/partner/badge/${e.toLowerCase().replace(/\s+/g,"_")}.png`,t=$("<img>").attr("src",t).attr("alt",e).attr("title",e).attr("loading","lazy").addClass("reseller_box-badge");a.append(t)})}else l.length&&l.remove()}t.push(...e.categories||[]),a.push(...e.partner_badges||[]),e.partner_status&&n.push(e.partner_status)}),i('[data-element="list-zakres"]',t,"category"),i('[data-element="list-specialization"]',a,"badge"),i('[data-element="list-status"]',n,"status"),0===r.partners.length&&c.hide()}else c.hide();requestAnimationFrame(()=>{e()})}).then(()=>{a++,n=!0,l(),e()})},error:function(){$('[data-element="resellers-list"]').children('[data-element="reseller-item"]').hide(),a++,n=!0,l(),t()}})}).then(()=>{d(),c()}).catch(e=>{console.error("Error loading data:",e)})});