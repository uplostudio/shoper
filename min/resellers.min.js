$(document).ready(function(){function o(e,t){let a=[];function n(e,t){return`https://dcsaascdn.net/shoperpl/partner/${e}/${t.toLowerCase().replace(/\s+/g,"_")}.png`}return e&&a.push(`<img class="reseller_box-badge" src="${n("status",e)}" alt="${e}">`),(t||[]).forEach(e=>{a.push(`<img class="reseller_box-badge" src="${n("badge",e)}" alt="${e}">`)}),a.join("")}function r(e,t,r){let l=$(e),s=l.children(".filters2_item").first().clone();l.empty(),[...new Set(t)].sort((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})).forEach((e,t)=>{var a=s.clone(),t=r+"-"+t,n=$("<input>").attr("type","checkbox").attr("id",t).addClass("new__form-input is-checkbox"),t=$("<label>").attr("for",t).addClass("new_checkbox-label").text(e);a.empty().append(n,t),l.append(a)})}function l(e,t,a,n,r=!1){0<a.children().filter(function(){return $(this).find('[data-element="tag-text"]').text()===e}).length||((t=t.clone()).removeAttr("data-element"),t.find('[data-element="tag-text"]').text(e),n&&t.data("checkbox",n),r&&t.data("isSearchTag",!0),a.append(t),t.on("click",function(){var e=$(this),t=e.data("isSearchTag");t?$('input[data-name="search"]').val("").trigger("input"):(t=e.data("checkbox"))&&t.prop("checked",!1).trigger("change"),e.remove(),s()}))}let a;function s(){let i=$('[data-element="list-zakres"] input:checked').map(function(){return $(this).next("label").text()}).get(),d=$('[data-element="list-specialization"] input:checked').map(function(){return $(this).next("label").text()}).get(),c=$('[data-element="list-status"] input:checked').map(function(){return $(this).next("label").text()}).get(),o=$('input[data-name="search"]').val().toLowerCase();$('[data-element="reseller-item"]').each(function(){var e=$(this);let t=e.find('[data-element="reseller-categories"] .category-item span:last-child').map(function(){return $(this).text()}).get(),a=e.find('[data-element="reseller-badges-wrapper"] img').map(function(){return $(this).attr("alt")}).get();var n=e.find('[data-element="reseller-status"] div').text(),r=e.find('[data-element="reseller-name"]').text().toLowerCase(),l=0===i.length||i.some(e=>t.includes(e)),s=0===d.length||d.some(e=>a.includes(e)),n=0===c.length||c.includes(n),r=""===o||r.includes(o);l&&s&&n&&r?e.show():e.hide()});{let a=$('[data-element="tag-template"]');if(0!==a.length){let e=a.parent(),t=(e.children().not(a).remove(),0);$('[data-element="list-zakres"], [data-element="list-specialization"], [data-element="list-status"]').find("input:checked").each(function(){l($(this).next("label").text(),a,e,$(this)),t++});var n=$('input[data-name="search"]').val().trim();n&&(l(n,a,e,null,!0),t++),0<t?(e.children().not(a).removeClass("hide"),e.removeClass("hide")):(e.children().addClass("hide"),e.addClass("hide")),a.addClass("hide")}}}$('[data-element="list-zakres"], [data-element="list-specialization"], [data-element="list-status"]').on("change",'input[type="checkbox"]',function(){s()}),$('input[data-name="search"]').on("input",function(){var e,t;e=s,t=150,clearTimeout(a),a=setTimeout(e,t)}),$.ajax({url:"https://backend.webflow.prod.shoper.cloud/?action=get_partners",method:"GET",dataType:"json",success:function(a){let d=$('[data-element="resellers-list"]'),c=d.children('[data-element="reseller-item"]').first();if(d.children('[data-element="reseller-item"]').not(":first").remove(),a&&1===a.status&&Array.isArray(a.partners)){let e=[],t=[],n=[];a.partners.forEach((a,r)=>{var l=0===r?c:c.clone();0!==r&&d.append(l);{var s=a;(r=l).attr("data-reseller-id",s.id),r.attr("href","/katalog-partnerow?reseller="+s.id),r.find('[data-element="reseller-logo"]').attr("src",s.logo||""),r.find('[data-element="reseller-name"]').text(s.name||""),r.find('[data-element="reseller-city"]').text(s.city||"");let n=r.find('[data-element="reseller-categories"]'),t=(n.empty(),(s.categories||[]).forEach(e=>{var t=$("<div>").addClass("category-item").css({display:"flex",alignItems:"center"}),a=$("<span>").html('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.0001 10.7799L3.2201 7.9999L2.27344 8.9399L6.0001 12.6666L14.0001 4.66656L13.0601 3.72656L6.0001 10.7799Z" fill="#03081C"/></svg>').css({marginRight:"8px",flexShrink:0}),e=$("<span>").text(e);t.append(a,e),n.append(t)}),r.find('[data-element="reseller-erps"]'));t.empty(),(s.erps||[]).forEach(e=>{t.append($("<div>").text(e))});var i=r.find('[data-element="reseller-status"]');i.empty(),s.partner_status&&i.append($("<div>").text(s.partner_status));let e=o(s.partner_status,s.partner_badges);if(i=r.find('[data-element="reseller-badges-wrapper"]'),r=r.find('[data-element="badges-section"]'),s.partner_status||s.partner_badges&&0!==s.partner_badges.length){let e=o(s.partner_status,s.partner_badges);i.length&&i.html(e)}else r.length&&r.remove()}l.show(),e.push(...a.categories||[]),t.push(...a.partner_badges||[]),a.partner_status&&n.push(a.partner_status)}),r('[data-element="list-zakres"]',e,"category"),r('[data-element="list-specialization"]',t,"badge"),r('[data-element="list-status"]',n,"status"),0===a.partners.length&&c.hide()}else c.hide()},error:function(e,t,a){$('[data-element="resellers-list"]').children('[data-element="reseller-item"]').hide()},complete:function(){$('[data-element="filters-component"]').removeClass("is-loading")}})});