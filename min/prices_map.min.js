(()=>{try{function p(e,r){try{return r.split(".").reduce((e,r)=>e&&e[r],e)}catch(e){return null}}function a(e,r=!1){try{var t;return!e||isNaN(e)?r?"0 %":"0 zł":((t=parseFloat(e).toFixed(2)).endsWith(".00")?t.slice(0,-3):t)+(r?" %":" zł")}catch(e){return r?"0 %":"0 zł"}}function u(r,e,t=!1){try{var o=$(r);return o.length&&e&&o.text(a(e,t)),{selector:r,value:e?a(e,t):"0"}}catch(e){return{selector:r,value:t?"0 %":"0 zł"}}}"undefined"==typeof jQuery?console.warn("Price updater: jQuery not found, waiting for load..."):(window.ShoperPriceDebugger=window.ShoperPriceDebugger||{secretKey:"shoper_price_debug_2024",isEnabled:function(){try{return"enabled"===localStorage.getItem("shoper_price_debug")||new URLSearchParams(window.location.search).get("debug")===this.secretKey||"localhost"===window.location.hostname||"dev.your-domain.com"===window.location.hostname}catch(e){return!1}},init:function(e){try{let r=e;$(document).off("keydown.priceDebugger").on("keydown.priceDebugger",e=>{e.ctrlKey&&e.shiftKey&&"D"===e.key&&this.isEnabled()&&this.showData(r)}),this.isEnabled()&&this.showData(r)}catch(e){console.warn("Price debugger initialization failed:",e)}},showData:function(e){try{console.group("Price Data Overview"),console.table(e),console.groupEnd()}catch(e){console.warn("Failed to show debug data:",e)}},generateMarkdownTable:function(e){try{let r=`| Plan Type | Price Type | Data Field Attribute | Value |
|-----------|------------|---------------------|--------|
`;return e.forEach(e=>{r+=`| ${e.plan} | ${e.priceType} | \`${e.selector}\` | ${e.value} |
`}),r}catch(e){return"Error generating markdown table"}}},$(function(){try{$.ajax({url:"https://backend.webflow.prod.shoper.cloud",method:"GET",data:{action:"get_prices_list"},success:function(e){var l=e;try{if(l&&"object"==typeof l){var r=["standard","premium","standard-plus","enterprise"];let i=1===p(l,"promotion.active"),s=[];r.forEach(c=>{try{let a={monthly:{net:p(l,`price.${c}.12.month.net`),gross:p(l,`price.${c}.12.month.gross`)},yearly:{net:p(l,`price.${c}.12.year.net`),gross:p(l,`price.${c}.12.year.gross`)},single:{net:p(l,`price.${c}.1.net`),gross:p(l,`price.${c}.1.gross`)}},n=i?{monthly:{net:p(l,`promotion.price.${c}.12.month.net`),gross:p(l,`promotion.price.${c}.12.month.gross`)},yearly:{net:p(l,`promotion.price.${c}.12.year.net`),gross:p(l,`promotion.price.${c}.12.year.gross`)}}:null;["monthly","yearly","single"].forEach(o=>{["net","gross"].forEach(e=>{var r=a[o][e],t=`data-field="${c}-${o}-${e}"`,r=u(`[${t}]`,r);s.push({plan:c.charAt(0).toUpperCase()+c.slice(1),priceType:`Regular ${o.charAt(0).toUpperCase()+o.slice(1)} `+e.toUpperCase(),selector:t,value:r.value})})}),i&&n?(["monthly","yearly"].forEach(o=>{["net","gross"].forEach(e=>{var r=n[o][e],t=`data-field="${c}-promo-${o}-${e}"`,r=u(`[${t}]`,r);s.push({plan:c.charAt(0).toUpperCase()+c.slice(1),priceType:`Promo ${o.charAt(0).toUpperCase()+o.slice(1)} `+e.toUpperCase(),selector:t,value:r.value})})}),$(`.${c}-promo-price`).show(),$(`.${c}-regular-price`).addClass("strikethrough")):($(`.${c}-promo-price`).hide(),$(`.${c}-regular-price`).removeClass("strikethrough"));var e,r=p(l,`price.${c}.discount`),t=i?p(l,`promotion.price.${c}.discount`):null,o=u(`[data-field="${c}-regular-discount"]`,r,!0);s.push({plan:c.charAt(0).toUpperCase()+c.slice(1),priceType:"Regular Discount",selector:`data-field="${c}-regular-discount"`,value:o.value}),i&&(e=u(`[data-field="${c}-promo-discount"]`,t,!0),s.push({plan:c.charAt(0).toUpperCase()+c.slice(1),priceType:"Promo Discount",selector:`data-field="${c}-promo-discount"`,value:e.value}))}catch(e){console.warn(`Price updater: Error processing plan ${c}:`,e)}}),window.ShoperPriceDebugger.init(s)}else console.warn("Price updater: Invalid data received")}catch(e){console.warn("Price updater: Error in main update function:",e)}},error:function(e,r,t){console.warn("Price updater: Error fetching prices:",t)}})}catch(e){console.warn("Price updater: Failed to initialize:",e)}}))}catch(e){console.warn("Price updater: Critical error:",e)}})();