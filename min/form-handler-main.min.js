let originalTrigger,error,API_URL_ADRESS="https://backend.webflow.prod.shoper.cloud",validationPatterns=[{type:"email",pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/},{type:"phone",pattern:/^\d{9}$/},{type:"text",pattern:/^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ðŚś ,.'-]+$/},{type:"nip",pattern:/^\d{10}$/},{type:"url",pattern:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/},{type:"zipcode",pattern:/^(\d{5}|\d{2}-\d{3})$/}],omittedAtributes=["method","name","id","class","aria-label","fs-formsubmit-element","wf-page-id","wf-element-id","autocomplete","layer"];function validateInput(e){var t=$(e).attr("id"),a=$(e).data("form");let n=$(e).data("type");var o="checkbox"===n?$(e).prop("checked"):$(e).val(),r=$(e).prop("required");let i=r&&(!1===o||""===o)?a+" - jest wymagane":null;return["1","0"].includes(t)||(""!==o&&!1!==o&&(t=validationPatterns.find(e=>e.type===n)?.pattern)&&!t.test(o)&&(i=a+" nie jest wypełnione prawidłowo"),!r||""!==o&&!1!==o?"checkbox"===n||"client_type"===a?($(e).prev(".form-checkbox-icon").removeClass("error"),$(e).parent().next('[class*="error-wrapper"]').length&&$(e).parent().next().css("display","none")):($(e).next().next().css("display","none"),$(e).next().css("display",null!==i?"flex":"none"),$(e).toggleClass("error",null!==i)):"checkbox"===n?($(e).prev(".form-checkbox-icon").addClass("error"),$(e).parent().next().css("display","flex")):($(e).next().next().css("display","flex"),$(e).next().css("display","none"),$(e).addClass("error"))),i}function handleBlur(e){$(e.target).data("touched")&&validateInput(e.target)}function validateForm(e){e=$(e).find("input:not([type='submit']):enabled:not([data-exclude='true']), textarea:enabled, select:enabled");let t=0;return e.each(function(){validateInput($(this))&&t++}),t}function sendFormDataToURL(r,e){let n=new FormData;$.each($(r)[0].attributes,function(e,t){var a=t.name.replace("data-",""),t=t.value;""===t||omittedAtributes.includes(a)||n.append(a,t)});var t=$(r).find("input:not([type='submit']):enabled:not([data-exclude='true']), textarea:enabled, select:enabled");let i={},d=["loan_decision_contact","external_ads_terms","simple_form","register_reseller"],o=(t.each(function(){var e=$(this);let t=e.val();var a=e.attr("data-form");if(e.is("input")){var n=d.includes($(r).attr("data-action")),o=e.attr("type");if("checkbox"===o||"radio"===o){if("radio"===o)t=e.val();else if(n)t=e.is(":checked")?"1":"0";else{if(!e.is(":checked"))return;t=e.next().text().replace(/[^\u0000-\u007F\u0100-\u017F]+/g,"").trim()}i.hasOwnProperty(a)||(i[a]=[]),i[a].push(t)}else""!==t&&(i[a]=t)}else(e.is("textarea")||e.is("select"))&&(i[a]=t)}),["marketplace","country","create_or_move_shop"]),a=(Object.keys(i).forEach(a=>{o.includes(a)&&Array.isArray(i[a])?i[a].forEach((e,t)=>{n.append(a+`[${t}]`,e)}):n.append(a,i[a])}),$(r).find(".loading-in-button"));t=DataLayerGatherers.getValueTrackData();if(n.append("front_page",window.location.host+window.location.pathname),n.append("adwords[gclid]",window.myGlobals.gclidValue),n.append("adwords[fbclid]",window.myGlobals.fbclidValue),t)for(var[l,s]of Object.entries(t))"timestamp"!==l&&n.append(l,s);$.ajax({type:"POST",url:API_URL_ADRESS,data:n,processData:!1,contentType:!1,beforeSend:function(){a.show()},complete:function(){a.hide()},success:function(e){if(console.log(e),n.has("host"))return 1===e.status?($(r).siblings(".error-admin").hide(),void(window.location.href=e.redirect)):void $(r).siblings(".error-admin").show();0!==e.status?($(r).hide(),$(r).next().show(),$(document).trigger("submitSuccess",$(r))):$(document).trigger("submitError",$(r))},error:function(){$(r).siblings(".error-message").show()}})}function handleSubmitClick(e){e.preventDefault();e=this.closest("form");0<validateForm(e)?window.dataLayer.push({event:"myTrackEvent",eventCategory:"Button modal form error",eventAction:$(this).val(),eventLabel:window.location.href,eventType:$(e).attr("data-label")||"consult-form"}):sendFormDataToURL(e,this)}function cleanObject(e={}){var t,a={};for(t in e)null!=e[t]&&""!==e[t]&&(a[t]=e[t]);return a}function sendDataLayer(e={}){e=cleanObject(e),window.dataLayer&&dataLayer.push(e)}$("input").each(function(){let t=$(this);t.closest("form").find("[data-form='submit']");t.data("touched",!1),t.on("blur",handleBlur),t.on("keydown",function(e){t.data("touched")||9===e.keyCode||t.data("touched",!0)})}),$("[data-form='submit']").click(handleSubmitClick),$("[data-app^='open_']").on("click",function(){var e=(originalTrigger=$(this)).data("app").replace(/^open_|_modal_button$/g,""),e=$(`[data-app='${e}']`),e=(e.addClass("modal--open"),$(document.body).toggleClass("overflow-hidden",!0),e.find("form:first"));0<e.length&&e.find(":input:enabled:visible:first").focus()}),$("[fs-formsubmit-element='reset']").on("click",function(){$(".loading-in-button").hide()}),$(document).on("submitSuccess",function(e,t){sendDataLayer({event:"myTrackEvent",eventCategory:"Button modal form sent",eventAction:$(t).find('[type="submit"]').val(),eventType:$(t).attr("data-label"),eventLabel:window.location.href})}),$(document).on("submitError",function(e,t){sendDataLayer({event:"myTrackEvent",eventCategory:"Button modal form error",eventAction:$(t).find('[type="submit"]').val(),eventType:$(t).attr("data-label"),eventLabel:window.location.href})});