window.addEventListener("load",()=>{$("[app='open_migrate_modal_button']").on("click",function(){$("[app='migration_modal']").addClass("modal--open")}),(formWrappers=document.querySelectorAll("[app='migration']")).forEach(a=>{phoneInput=a.querySelector("[app='phone_campaign']"),emailInput=a.querySelector("[app='email_campaign']"),formTrigger=a.querySelector("[app='migration-submit']");let t=a.getAttribute("action");phoneInput.addEventListener("blur",checkPhoneBlurTwo),emailInput.addEventListener("blur",checkMailBlurTwo),formTrigger.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),formWrapper=e.target.closest("form"),loader=formWrapper.querySelector(".loading-in-button"),formWrapper=this.form,phoneInput=formWrapper.querySelector("[app='phone_campaign']"),emailInput=formWrapper.querySelector("[app='email_campaign']"),checkPhoneBlur(),checkEmailBlur(),outcomeOne&&outcomeTwo?(window.dataLayer&&(data={event:"myTrackEvent",eventCategory:"Button modal form sent",eventAction:formTrigger.value,eventLabel:window.location.pathname},dataLayer.push(data)),loader.style.display="block",$.ajax({url:"https://www.shoper.pl/ajax.php",headers:{},method:"POST",data:{action:t,email:emailValue,phone:phoneInputValue},success:function(e){1===e.status?(loader.style.display="none",a.querySelector("form").style.display="none",a.parentElement.querySelector(".w-form-done").style.display="block",a.parentElement.querySelector(".w-form-done").textContent="Sprawdź wiadomość, którą właśnie od nas otrzymałeś!",a.querySelector("form").reset()):(loader.style.display="none",a.parentElement.querySelector(".w-form-fail").style.display="block")}})):window.dataLayer&&(data={event:"myTrackEvent",eventCategory:"Button modal form error",eventAction:formTrigger.value,eventLabel:window.location.pathname},dataLayer.push(data))})})});